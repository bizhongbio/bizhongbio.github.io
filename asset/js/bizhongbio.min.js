/*
Theme Name: Bizhongbio
Theme URI: https://github.com/bizhongbio/bizhongbio
Author: Bizhong Lan
Author URI: https://bizhong.github.io/
Description: Bizhongbio is a free, minimalistic, and responsive WordPress Blog Theme.
Version: 2.0.0
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Tags: blog, one-column, two-columns, left-sidebar, custom-header, custom-menu, featured-images, flexible-header, full-width-template, microformats, threaded-comments
Text Domain: bizhongbio

This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others.
*/
$(function(){var pageName=$(document.body).attr('id');switch(pageName){case'home':handleHome();break;case'category':handleCategory();case'single':case'search':case'tag':catHeaderFixed();break;case'page-work':$(window).on('load resize',function(){handleWork()});break;case'page-video':handleVideo();break}$('#btn-nav').on('click',function(){$('#header, #cat-header').toggleClass('show-nav');$('#btn-search').toggle();if($('#header, #cat-header').hasClass('show-nav')){$('#btn-nav i').removeClass('fa-navicon').addClass('fa-remove');$('body, html').on('touchmove',function(event){event.preventDefault()})}else{$('#btn-nav i').removeClass('fa-remove').addClass('fa-navicon');$('body, html').off('touchmove')}});$('#btn-search').on('click',function(){$('#searchform').fadeIn(300);$('#s').focus();if($('#mask').length>0){$('#mask').fadeIn(300)}else{$('<div id="mask"></div>').appendTo('body')}$('body, html').on('touchmove',function(event){event.preventDefault()});$('#mask').on('click',function(){$('#searchform').css('display','');$('#s').blur();$('#mask').fadeOut(150);$('body, html').off('touchmove')})});function catHeaderFixed(){var globalHeaderHeight=$('.global-header').height();$(window).on('scroll',function(){if($(this).scrollTop()>globalHeaderHeight){$('#cat-header').addClass('cat-header-fixed')}else{$('#cat-header').removeClass('cat-header-fixed')}})}$(window).on('scroll',function(){if($(this).scrollTop()>600){$('#go-top').fadeIn(300)}else{$('#go-top').fadeOut(150)}});$('#go-top').on('click',function(event){$('body, html').animate({'scrollTop':'0'},600);event.preventDefault()});function handleHome(){var len=$('#hero-slides .slide').length,slideIndex=1,timer=null,startPosition={},endPosition={},isScrolling=-1;function slidesAnimation(){$('#hero-slides .slide').each(function(i){$(this).eq(slideIndex).css('left','0%').end().not(slideIndex).css('left',(-(slideIndex-i)*100)+'%');$('.slides-nav a').eq(slideIndex).addClass('current').siblings().removeClass('current')});slideIndex>=len-1?slideIndex=0:slideIndex++}timer=setInterval(slidesAnimation,6000);$('.slides-nav a').each(function(){$(this).on('click',function(event){clearInterval(timer);slideIndex=$(this).index();slidesAnimation();event.preventDefault()})});$(document).on('keydown',function(event){switch(event.keyCode){case 37:clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation();break;case 39:clearInterval(timer);slidesAnimation();break}});$('#hero-slides').on('touchstart',function(event){var touch=event.targetTouches[0];startPosition={x:touch.pageX,y:touch.pageY}});$('#hero-slides').on('touchmove',function(event){if(event.targetTouches.length===1){var touch=event.targetTouches[0];endPosition={x:touch.pageX-startPosition.x,y:touch.pageY-startPosition.y};isScrolling=Math.abs(endPosition.x)>Math.abs(endPosition.y)?0:1;if(isScrolling===0){event.preventDefault()}}});$('#hero-slides').on('touchend',function(event){if(isScrolling===0){if(endPosition.x>10){clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation()}else if(endPosition.x<-10){clearInterval(timer);slidesAnimation()}}})}function handleCategory(){var catId=0;function hashChange(){switch(location.hash){case'#frontend':catId=0;break;case'#backend':catId=1;break;case'#mobile':catId=2;break;case'#design':catId=3;break;case'#other':catId=4;break;default:catId=0}$('#menu-cat-nav li:eq('+catId+')').addClass('current-menu-item').siblings().removeClass('current-menu-item');$('.posts').eq(catId).show().siblings('.posts').hide()}if(location.hash){hashChange()}if($(window).width()<768){$('#menu-cat-nav li').each(function(i){$(this).on('click',function(){$('#cat-header').toggleClass('show-nav');$('#btn-search').toggle();$('#btn-nav i').removeClass('fa-remove').addClass('fa-navicon');$('body, html').off('touchmove')})})}$(window).on('hashchange',hashChange)}function handleWork(){var workWidth=$('#works .work').width(),columns=Math.floor($('#works').width()/workWidth),columnsHeight=[];$('#works .work').each(function(i){var columnIndex=0;if(i<columns){columnsHeight[i]=$(this).height();$(this).css({'position':'absolute','top':'0px','left':i*workWidth+'px'})}else{var columnMinHeight=Math.min.apply(null,columnsHeight);$.each(columnsHeight,function(j){if(columnsHeight[j]===columnMinHeight){columnIndex=j}});$(this).css({'position':'absolute','top':columnMinHeight+'px','left':columnIndex*workWidth+'px'});columnsHeight[columnIndex]+=$(this).height()}});$('#works').css({'height':Math.max.apply(null,columnsHeight)+'px'});$('#works .work').on('click',function(event){var self=$(this),workLeft='0px';if(!self.hasClass('work-current')){workLeft=self.css('left');$('#mask').fadeIn(300);$('body, html').scrollTop(self.offset().top);self.addClass('work-current').siblings().removeClass('work-current');self.css('left','50%')}$('#mask').on('click',function(){self.removeClass('work-current').css('left',workLeft);$('#mask').fadeOut(150)})})}function handleVideo(){var videoWidth=$('#videos .video').width(),videoHeight=$('#videos .video').height(),videoCount=0,videoTop=0;$('#videos .video').each(function(i){videoCount++;$(this).css({'position':'absolute','top':videoTop+'px','left':(i%2===0?'0px':videoWidth+'px')});if(videoCount%2===0){videoTop+=videoHeight}});$('#videos').css({'height':(videoHeight*$('#videos .video').length/2)+'px'});$('#videos .video').on('click',function(i){var self=$(this),videoLeft='0px';if(!self.hasClass('video-current')){videoLeft=self.css('left');$('#mask').fadeIn(300);$('body, html').scrollTop(self.offset().top-videoHeight/3);self.addClass('video-current').siblings().removeClass('video-current');self.css('left','50%');self.find('.video-player').attr('controls','controls')}$('#mask').on('click',function(){$('#mask').fadeOut(150);self.removeClass('video-current').css('left',videoLeft);self.find('.video-player').removeAttr('controls')})})}});