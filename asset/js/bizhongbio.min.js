$(function(){var pageName=$(document.body).attr('id');switch(pageName){case'home':handleHome();break;case'category':handleArticle();catHeaderFixed();break;case'page-work':handleWork();$(window).on('resize',function(){handleWork()});break;default:console.log('Nothing to do.')}$('#btn-nav').on('click',function(){$('#header, #cat-header').toggleClass('show-nav');if($('#header, #cat-header').hasClass('show-nav')){$('#btn-nav i').removeClass('fa-navicon').addClass('fa-remove');$('body, html').on('touchmove',function(event){event.preventDefault()})}else{$('#btn-nav i').removeClass('fa-remove').addClass('fa-navicon');$('body, html').off('touchmove')}});function catHeaderFixed(){$(window).on('scroll',function(){if($(this).scrollTop()>32){$('#cat-header').addClass('cat-header-fixed');if($(window).width()<768){$('#menu-cat-nav').css('paddingTop','48px')}}else{$('#cat-header').removeClass('cat-header-fixed');if($(window).width()<768){$('#menu-cat-nav').removeAttr("style")}}})}$(window).on('scroll',function(){if($(this).scrollTop()>600){$('#go-top').fadeIn(300)}else{$('#go-top').fadeOut(300)}});$('#go-top').on('click',function(event){$('body, html').animate({'scrollTop':'0'},600);event.preventDefault()});function handleHome(){var len=$('#hero-slides .slide').length,slideIndex=1,timer,startPosition={},endPosition={},isScrolling=-1;function slidesAnimation(){$('#hero-slides .slide').each(function(i){$(this).eq(slideIndex).css('left','0%').end().not(slideIndex).css('left',(-(slideIndex-i)*100)+'%');$('.slides-nav a').eq(slideIndex).addClass('current').siblings().removeClass('current')});slideIndex>=len-1?slideIndex=0:slideIndex++}timer=setInterval(slidesAnimation,6000);$('.slides-nav a').each(function(){$(this).on('click',function(event){clearInterval(timer);slideIndex=$(this).index();slidesAnimation();event.preventDefault()})});$(document).on('keydown',function(event){switch(event.keyCode){case 37:clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation();break;case 39:clearInterval(timer);slidesAnimation();break}});$('#hero-slides').on('touchstart',function(event){var touch=event.targetTouches[0];startPosition={x:touch.pageX,y:touch.pageY}});$('#hero-slides').on('touchmove',function(event){if(event.targetTouches.length===1){var touch=event.targetTouches[0];endPosition={x:touch.pageX-startPosition.x,y:touch.pageY-startPosition.y};isScrolling=Math.abs(endPosition.x)>Math.abs(endPosition.y)?0:1;if(isScrolling===0){event.preventDefault()}}});$('#hero-slides').on('touchend',function(event){if(isScrolling===0){if(endPosition.x>10){clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation()}else if(endPosition.x<-10){clearInterval(timer);slidesAnimation()}}})}function handleArticle(){$('#menu-cat-nav li').each(function(i){$(this).on('click',function(){$(this).addClass('current-menu-item').siblings().removeClass('current-menu-item');$('.posts').eq(i).show().siblings('.posts').hide();if($(window).width()<768){$('#cat-header').toggleClass('show-nav');$('#btn-nav i').removeClass('fa-remove').addClass('fa-navicon');$('#menu-cat-nav').removeAttr("style");$('body, html').off('touchmove')}})})}function handleWork(){var workWidth=$('#works .work').width(),columns=Math.floor($('#works').width()/workWidth),columnsHeight=[];$('#works .work').each(function(i){var columnIndex=0;if(i<columns){columnsHeight[i]=$(this).height();$(this).css({'position':'absolute','top':'0px','left':i*workWidth+'px'})}else{var columnMinHeight=Math.min.apply(null,columnsHeight);$.each(columnsHeight,function(j){if(columnsHeight[j]===columnMinHeight){columnIndex=j}});$(this).css({'position':'absolute','top':columnMinHeight+'px','left':columnIndex*workWidth+'px'});columnsHeight[columnIndex]+=$(this).height()}});$('#works').css({'height':Math.max.apply(null,columnsHeight)+'px'});$('#works .work').on('click',function(event){var self=$(this);if(!self.hasClass('work-current')){var workLeft=self.css('left');$('#mask').css('display','block');$('body, html').scrollTop(self.offset().top);$(this).addClass('work-current').siblings().removeClass('work-current');$(this).css('left','50%')}$('#mask').on('click',function(){self.removeClass('work-current').css('left',workLeft);$('#mask').css('display','none')})})}});